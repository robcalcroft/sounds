function echo(e){console.log(e)}var app={playButtonText:'<i class="fa fa-play"></i>',pauseButtonText:'<i class="fa fa-pause"></i>',loadingButtonText:'<i class="fa fa-refresh fa-spin"></i>',trackStatus:"playing",currentSong:null,trackManager:null,clientID:null,playlist:null,playlistTrackNo:null,firstLoad:true,playPauseInit:function(){$("div.track-control #play-pause").click(function(){app.playPauseToggle()})},keyPressActions:function(){$("html").keydown(function(e){if(e.which==32){e.preventDefault();app.playPauseToggle()}else if(e.which==37){e.preventDefault();app.changeTrack("previous")}else if(e.which==39){e.preventDefault();app.changeTrack("next")}})},playPauseToggle:function(){if(app.trackStatus=="playing"){$("#play-pause").removeClass("fa fa-pause").addClass("fa fa-play");app.trackStatus="paused";app.trackManager.pause()}else{$("#play-pause").removeClass("fa fa-play").addClass("fa fa-pause");app.trackStatus="playing";app.trackManager.play();app.scrubberControl()}},trackControlInit:function(){$("div.side-controls-next-track").click(function(){app.changeTrack("next")});$("div.side-controls-previous-track").click(function(){app.changeTrack("previous")})},changeTrack:function(e){var t=parseInt(app.playlistTrackNo);if(e=="next"){if(t+1==app.playlist.tracks.length){t=0;app.playlistTrackNo=0;app.playSong(app.playlistTrackNo)}else{app.playSong(t+1)}}else if(e=="previous"){if(t-1<0){t=app.playlist.tracks.length-1;app.playSong(t)}else{app.playSong(t-1)}}},oops:function(e){if(e=="empty"){$("#track-title").html("This playlist is empty");$("div.track-data").hide();$("#track-artwork-src").attr("src","http://i.imgur.com/s7bJhl9.jpg");app.trackManager.stop();localStorage.clear()}else{$("#track-title").html("I couldn't find that! <br>Does the playlist exist? <span style='text-decoration: underline;' onclick='window.location.reload();'>Reload?</span>");$("#track-artwork-src").attr("src","http://i.imgur.com/mhrgNWX.jpg");$("div.track-data").hide();app.trackManager.stop();localStorage.clear()}},loadSong:function(){var e={};if(!app.firstLoad){e.url=$("#user-playlist").val();localStorage.setItem("user-playlist",e.url)}else if(app.firstLoad&&localStorage.getItem("user-playlist")){e.url=localStorage.getItem("user-playlist");app.firstLoad=false}else{e.url="https://soundcloud.com/robcalcroft/sets/robs-tracks";app.firstLoad=false}SC.initialize({client_id:"09b931a2e2114455aee177aa73749b1d"});$.getJSON("https://api.sndcdn.com/resolve?url="+e.url+"&_status_code_map%5B302%5D=200&_status_format=json&client_id=09b931a2e2114455aee177aa73749b1d",function(e){SC.get(e.location,function(e,t){console.log(t);if(t){app.oops();return false}if(e.tracks.length==0){app.oops("empty");return false}app.playlist=e;if(localStorage.getItem("user-playlist-currentTrack")){app.playSong(localStorage.getItem("user-playlist-currentTrack"))}else if(!localStorage.getItem("user-playlist-currentTrack")){app.playSong(0)}else{var n=function(e,t){return Math.floor(Math.random()*(t-e+1))+e}(0,app.playlist.track_count-1);app.playSong(n)}app.playPauseInit();app.trackControlInit();app.keyPressActions()})}).fail(app.oops)},playSong:function(e){if(app.trackStatus=="paused"){app.trackStatus="playing";$("#play-pause").removeClass("fa fa-play").addClass("fa fa-pause")}app.currentSong=app.playlist.tracks[e];app.playlistTrackNo=e;if(localStorage.getItem("user-playlist")){localStorage.removeItem("user-playlist-currentTrack");localStorage.setItem("user-playlist-currentTrack",app.playlistTrackNo)}try{app.trackManager.stop()}catch(t){console.log("No song to stop")}SC.stream(app.currentSong.uri,function(e,t){if(t){app.oops();return false}e._ondataerror=function(){app.oops();alert("broke")};app.trackManager=e;e.play();app.scrubberStart();e._onfinish=function(){app.changeTrack("next")}});document.title="Now Playing - "+app.currentSong.title+"   ";$("#track-title").html(app.currentSong.title);$("div.track-data").show();$("#track-artist").html(app.currentSong.user.username);$("#track-album").html(app.playlist.title);try{$("#track-artwork-src").attr("src",app.currentSong.artwork_url.replace("large.jpg","t500x500.jpg"))}catch(t){}},overlayControl:function(){$("footer #footer-1").click(function(){$("div#o1").fadeIn()});$("div.overlay-close span").click(function(){$("div#o1, div#o2").fadeOut()});$("div#custom-playlist").click(function(){$("div#o2").fadeIn()});$("#load-playlist").click(function(){var e=/(https|http):\/\/soundcloud.com/,t=$("#user-playlist").val(),n=function(){$("#error-empty, #error-no-link").hide()};if(!e.test(t)){n();$("#error-no-link").fadeIn("quick",function(){return false})}else{n();app.loadSong();$("div#o2").fadeOut();if(localStorage.getItem("user-playlist")){localStorage.removeItem("user-playlist-currentTrack")}}});$("#site-data-rm").click(function(){if(localStorage.length==0){$("#site-data-rm span").fadeOut(function(){$(this).html("No site data to remove :Â¬(").fadeIn().delay(2e3).fadeOut(function(){$(this).html("Remove Site Data").fadeIn()})})}else{localStorage.clear();$("#site-data-rm span").fadeOut(function(){$(this).html("All done :Â¬)").fadeIn().delay(2e3).fadeOut(function(){$(this).html("Remove Site Data").fadeIn()})})}})},scrubberStart:function(){setInterval(function(){var e=app.trackManager.position,t=app.trackManager.duration,n;n=e/t*100;n=Math.round(n);$("div.scrubber-slider").css("width",n+"%")},500)}};$(document).ready(function(){app.loadSong();app.overlayControl();try{app.playlistTrackNo=localStorage.getItem("user-playlist-currentTrack")}catch(e){}})